{"expireTime":9007200828410574000,"key":"gatsby-plugin-mdx-entire-payload-ca3f44a15c3cf356d58b8a676a5c256b-/ibm-garage-developer-guide","val":{"mdast":{"type":"root","children":[{"type":"import","value":"import DefaultLayout from \"/home/jenkins/workspace/dev/dev-ibm-garage-cloud.ibm-garage-developer-guide.sms-pipeline/node_modules/gatsby-theme-carbon/src/templates/Default.js\"","position":{"start":{"line":3,"column":1,"offset":2},"end":{"line":3,"column":175,"offset":176},"indent":[]}},{"type":"export","default":true,"value":"export default DefaultLayout","position":{"start":{"line":5,"column":1,"offset":178},"end":{"line":5,"column":29,"offset":206},"indent":[]}},{"type":"jsx","value":"<PageDescription>","position":{"start":{"line":8,"column":1,"offset":209},"end":{"line":8,"column":18,"offset":226},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"SolSA makes it possible to specify the software architecture of Kubernetes-managed cloud applications as JavaScript or TypeScript programs.","position":{"start":{"line":10,"column":1,"offset":228},"end":{"line":10,"column":140,"offset":367},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":228},"end":{"line":10,"column":140,"offset":367},"indent":[]}},{"type":"jsx","value":"</PageDescription>","position":{"start":{"line":12,"column":1,"offset":369},"end":{"line":12,"column":19,"offset":387},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Overview","position":{"start":{"line":14,"column":4,"offset":392},"end":{"line":14,"column":12,"offset":400},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":389},"end":{"line":14,"column":12,"offset":400},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Kubernetes is becoming the de facto standard for managing applications in the cloud. Thanks to ","position":{"start":{"line":16,"column":1,"offset":402},"end":{"line":16,"column":96,"offset":497},"indent":[]}},{"type":"link","title":null,"url":"https://operatorhub.io/","children":[{"type":"text","value":"operators","position":{"start":{"line":16,"column":97,"offset":498},"end":{"line":16,"column":106,"offset":507},"indent":[]}}],"position":{"start":{"line":16,"column":96,"offset":497},"end":{"line":16,"column":132,"offset":533},"indent":[]}},{"type":"text","value":", Kubernetes can be extended to manage virtually any kind of application resources: not only containers and microservices, but also virtual machines, cloud functions and events, managed cloud services, policies, meshes, etc. Each resource can be declared and configured with a few lines of YAML. However, while YAML is a fine language to perform some basic configuration, SolSA is designed to enable application developers to reason about applications at a higher-level of abstraction using familiar languages and development tools.","position":{"start":{"line":16,"column":132,"offset":533},"end":{"line":16,"column":664,"offset":1065},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":402},"end":{"line":16,"column":664,"offset":1065},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The SolSA library for Node.js —a shorthand for Solution Service Architecture — makes it possible to specify the architecture of cloud applications as programs. SolSA enables developers to configure Kubernetes-managed resources by writing JavaScript or TypeScript code instead of YAML. SolSA automatically translates the developer written code to the required lower-level YAML. SolSA integrates with IDEs such as Visual Studio Code to provide online validation, code completion, and documentation of the various resources and configuration parameters.","position":{"start":{"line":18,"column":1,"offset":1067},"end":{"line":18,"column":551,"offset":1617},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":1067},"end":{"line":18,"column":551,"offset":1617},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Getting Started","position":{"start":{"line":20,"column":4,"offset":1622},"end":{"line":20,"column":19,"offset":1637},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":1619},"end":{"line":20,"column":19,"offset":1637},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":22,"column":1,"offset":1639},"end":{"line":22,"column":5,"offset":1643},"indent":[]}},{"type":"inlineCode","value":"solsa","position":{"start":{"line":22,"column":5,"offset":1643},"end":{"line":22,"column":12,"offset":1650},"indent":[]}},{"type":"text","value":" CLI is included in the ","position":{"start":{"line":22,"column":12,"offset":1650},"end":{"line":22,"column":36,"offset":1674},"indent":[]}},{"type":"link","title":null,"url":"/guides/tools-image","children":[{"type":"text","value":"Tools Image","position":{"start":{"line":22,"column":37,"offset":1675},"end":{"line":22,"column":48,"offset":1686},"indent":[]}}],"position":{"start":{"line":22,"column":36,"offset":1674},"end":{"line":22,"column":70,"offset":1708},"indent":[]}},{"type":"text","value":" and is pre-configured as a plugin to the ","position":{"start":{"line":22,"column":70,"offset":1708},"end":{"line":22,"column":112,"offset":1750},"indent":[]}},{"type":"link","title":null,"url":"/guides/continuous-delivery","children":[{"type":"text","value":"ArgoCD instance","position":{"start":{"line":22,"column":113,"offset":1751},"end":{"line":22,"column":128,"offset":1766},"indent":[]}}],"position":{"start":{"line":22,"column":112,"offset":1750},"end":{"line":22,"column":158,"offset":1796},"indent":[]}},{"type":"text","value":" installed in the ","position":{"start":{"line":22,"column":158,"offset":1796},"end":{"line":22,"column":176,"offset":1814},"indent":[]}},{"type":"inlineCode","value":"tools","position":{"start":{"line":22,"column":176,"offset":1814},"end":{"line":22,"column":183,"offset":1821},"indent":[]}},{"type":"text","value":" namespace of your cluster. No further setup is needed for basic usage of SolSA.  To enable full IDE support, you will need to install the ","position":{"start":{"line":22,"column":183,"offset":1821},"end":{"line":22,"column":322,"offset":1960},"indent":[]}},{"type":"inlineCode","value":"solsa","position":{"start":{"line":22,"column":322,"offset":1960},"end":{"line":22,"column":329,"offset":1967},"indent":[]}},{"type":"text","value":" package using npm in the same manner in which you would install any npm package you want to use in your IDE. Some typical installation options are discussed in the ","position":{"start":{"line":22,"column":329,"offset":1967},"end":{"line":22,"column":494,"offset":2132},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/IBM/solsa#solsa-setup","children":[{"type":"text","value":"SolSA setup instructions","position":{"start":{"line":22,"column":495,"offset":2133},"end":{"line":22,"column":519,"offset":2157},"indent":[]}}],"position":{"start":{"line":22,"column":494,"offset":2132},"end":{"line":22,"column":562,"offset":2200},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":22,"column":562,"offset":2200},"end":{"line":22,"column":563,"offset":2201},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":1639},"end":{"line":22,"column":563,"offset":2201},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Usage Scenarios","position":{"start":{"line":24,"column":4,"offset":2206},"end":{"line":24,"column":19,"offset":2221},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":2203},"end":{"line":24,"column":19,"offset":2221},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"SolSA can be applied in any scenario where it is desirable to use a higher-level of abstraction to programmatically generate YAML to be applied to a Kubernetes or OpenShift cluster.  The use of SolSA is particularly compelling to:","position":{"start":{"line":26,"column":1,"offset":2223},"end":{"line":26,"column":231,"offset":2453},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":2223},"end":{"line":26,"column":231,"offset":2453},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Specify the architecture of complex applications composed of multiple Kubernetes resources. SolSA augments the base Kubernetes resources with additional abstractions that simplify the specification of common patterns and reduce the amount of code written.","position":{"start":{"line":27,"column":5,"offset":2458},"end":{"line":27,"column":260,"offset":2713},"indent":[]}}],"position":{"start":{"line":27,"column":5,"offset":2458},"end":{"line":27,"column":260,"offset":2713},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":2454},"end":{"line":27,"column":260,"offset":2713},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Enable full IDE-support for your software architecture, including validation, code assist, and integrated documentation of Kubernetes resources and operators.","position":{"start":{"line":28,"column":5,"offset":2718},"end":{"line":28,"column":163,"offset":2876},"indent":[]}}],"position":{"start":{"line":28,"column":5,"offset":2718},"end":{"line":28,"column":163,"offset":2876},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":2714},"end":{"line":28,"column":163,"offset":2876},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Allow a single architecture specification to be programmatically specialized to different contexts (eg. dev vs. test vs. prod).","position":{"start":{"line":29,"column":5,"offset":2881},"end":{"line":29,"column":132,"offset":3008},"indent":[]}}],"position":{"start":{"line":29,"column":5,"offset":2881},"end":{"line":29,"column":132,"offset":3008},"indent":[]}}],"position":{"start":{"line":29,"column":1,"offset":2877},"end":{"line":29,"column":132,"offset":3008},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":2454},"end":{"line":29,"column":132,"offset":3008},"indent":[1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Specification of Kubernetes Resources","position":{"start":{"line":31,"column":5,"offset":3014},"end":{"line":31,"column":42,"offset":3051},"indent":[]}}],"position":{"start":{"line":31,"column":1,"offset":3010},"end":{"line":31,"column":42,"offset":3051},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Deploying just a single microservice that is accessible outside of a Kubernetes cluster requires specifying three related Kubernetes resources: a ","position":{"start":{"line":33,"column":1,"offset":3053},"end":{"line":33,"column":147,"offset":3199},"indent":[]}},{"type":"inlineCode","value":"Deployment","position":{"start":{"line":33,"column":147,"offset":3199},"end":{"line":33,"column":159,"offset":3211},"indent":[]}},{"type":"text","value":", a ","position":{"start":{"line":33,"column":159,"offset":3211},"end":{"line":33,"column":163,"offset":3215},"indent":[]}},{"type":"inlineCode","value":"Service","position":{"start":{"line":33,"column":163,"offset":3215},"end":{"line":33,"column":172,"offset":3224},"indent":[]}},{"type":"text","value":", and an ","position":{"start":{"line":33,"column":172,"offset":3224},"end":{"line":33,"column":181,"offset":3233},"indent":[]}},{"type":"inlineCode","value":"Ingress","position":{"start":{"line":33,"column":181,"offset":3233},"end":{"line":33,"column":190,"offset":3242},"indent":[]}},{"type":"text","value":". SolSA simplifies this task by reducing the amount of repetitive code a developer needs to write and maintain.","position":{"start":{"line":33,"column":190,"offset":3242},"end":{"line":33,"column":301,"offset":3353},"indent":[]}}],"position":{"start":{"line":33,"column":1,"offset":3053},"end":{"line":33,"column":301,"offset":3353},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To illustrate how to use SolSA to specify the architecture of a simple cloud native application, we use the ","position":{"start":{"line":35,"column":1,"offset":3355},"end":{"line":35,"column":109,"offset":3463},"indent":[]}},{"type":"link","title":null,"url":"https://istio.io/docs/examples/bookinfo/","children":[{"type":"text","value":"Bookinfo sample application","position":{"start":{"line":35,"column":110,"offset":3464},"end":{"line":35,"column":137,"offset":3491},"indent":[]}}],"position":{"start":{"line":35,"column":109,"offset":3463},"end":{"line":35,"column":180,"offset":3534},"indent":[]}},{"type":"text","value":" from the Istio project. Bookinfo consists of four containerized microservices: an externally exposed productpage service that is implemented using three internal backend microservices.","position":{"start":{"line":35,"column":180,"offset":3534},"end":{"line":35,"column":365,"offset":3719},"indent":[]}}],"position":{"start":{"line":35,"column":1,"offset":3355},"end":{"line":35,"column":365,"offset":3719},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The tabs below contain two variants of the SolSA specification of Bookinfo's architecture and the (identical) Kubernetes YAML that is generated from either one of these specifications by the ","position":{"start":{"line":37,"column":1,"offset":3721},"end":{"line":37,"column":192,"offset":3912},"indent":[]}},{"type":"inlineCode","value":"solsa","position":{"start":{"line":37,"column":192,"offset":3912},"end":{"line":37,"column":199,"offset":3919},"indent":[]}},{"type":"text","value":" CLI.","position":{"start":{"line":37,"column":199,"offset":3919},"end":{"line":37,"column":204,"offset":3924},"indent":[]}}],"position":{"start":{"line":37,"column":1,"offset":3721},"end":{"line":37,"column":204,"offset":3924},"indent":[]}},{"type":"jsx","value":"<Tabs>","position":{"start":{"line":39,"column":1,"offset":3926},"end":{"line":39,"column":7,"offset":3932},"indent":[]}},{"type":"jsx","value":"<Tab label=\"SolSA ContainerizedService\">","position":{"start":{"line":41,"column":1,"offset":3934},"end":{"line":41,"column":41,"offset":3974},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"A very common Kubernetes pattern is the combination of a ","position":{"start":{"line":43,"column":1,"offset":3976},"end":{"line":43,"column":58,"offset":4033},"indent":[]}},{"type":"inlineCode","value":"Deployment","position":{"start":{"line":43,"column":58,"offset":4033},"end":{"line":43,"column":70,"offset":4045},"indent":[]}},{"type":"text","value":" and a ","position":{"start":{"line":43,"column":70,"offset":4045},"end":{"line":43,"column":77,"offset":4052},"indent":[]}},{"type":"inlineCode","value":"Service","position":{"start":{"line":43,"column":77,"offset":4052},"end":{"line":43,"column":86,"offset":4061},"indent":[]}},{"type":"text","value":" to implement a single logical microservice. SolSA's ","position":{"start":{"line":43,"column":86,"offset":4061},"end":{"line":43,"column":139,"offset":4114},"indent":[]}},{"type":"inlineCode","value":"ContainerizedService","position":{"start":{"line":43,"column":139,"offset":4114},"end":{"line":43,"column":161,"offset":4136},"indent":[]}},{"type":"text","value":" provides a higher level abstraction for this pattern that allows the developer to specify the essential elements while eliding virtually all of the Kubernetes-specific details. As shown below, simple microservices can be specified very concisely. By providing additional arguments to the ","position":{"start":{"line":43,"column":161,"offset":4136},"end":{"line":43,"column":450,"offset":4425},"indent":[]}},{"type":"inlineCode","value":"ContainerizedService","position":{"start":{"line":43,"column":450,"offset":4425},"end":{"line":43,"column":472,"offset":4447},"indent":[]}},{"type":"text","value":" constructor it is possible to control many aspects of the generated YAML. Specifying that the ","position":{"start":{"line":43,"column":472,"offset":4447},"end":{"line":43,"column":567,"offset":4542},"indent":[]}},{"type":"inlineCode","value":"productpage","position":{"start":{"line":43,"column":567,"offset":4542},"end":{"line":43,"column":580,"offset":4555},"indent":[]}},{"type":"text","value":" service should be exposed outside the cluster is declared by invoking ","position":{"start":{"line":43,"column":580,"offset":4555},"end":{"line":43,"column":651,"offset":4626},"indent":[]}},{"type":"inlineCode","value":"getIngress","position":{"start":{"line":43,"column":651,"offset":4626},"end":{"line":43,"column":663,"offset":4638},"indent":[]}},{"type":"text","value":" passing the desired virtual host name ","position":{"start":{"line":43,"column":663,"offset":4638},"end":{"line":43,"column":702,"offset":4677},"indent":[]}},{"type":"inlineCode","value":"bookinfo","position":{"start":{"line":43,"column":702,"offset":4677},"end":{"line":43,"column":712,"offset":4687},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":43,"column":712,"offset":4687},"end":{"line":43,"column":713,"offset":4688},"indent":[]}}],"position":{"start":{"line":43,"column":1,"offset":3976},"end":{"line":43,"column":713,"offset":4688},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"let solsa = require('solsa')\n\nlet details = new solsa.ContainerizedService({ name: 'details', image: 'istio/examples-bookinfo-details-v1:1.15.0', port: 9080 })\nlet ratings = new solsa.ContainerizedService({ name: 'ratings', image: 'istio/examples-bookinfo-ratings-v1:1.15.0', port: 9080 })\nlet reviews = new solsa.ContainerizedService({ name: 'reviews', image: 'istio/examples-bookinfo-reviews-v1:1.15.0', port: 9080 })\nlet productpage = new solsa.ContainerizedService({ name: 'productpage', image: 'istio/examples-bookinfo-productpage-v1:1.15.0', port: 9080 })\nproductpage.env = {\n  DETAILS_HOSTNAME: details.name,\n  RATINGS_HOSTNAME: ratings.name,\n  REVIEWS_HOSTNAME: reviews.name\n}\nlet entry = productpage.getIngress({ vhost: 'bookinfo' })\n\nmodule.exports = new solsa.Bundle({ details, ratings, reviews, productpage, entry })","position":{"start":{"line":45,"column":1,"offset":4690},"end":{"line":60,"column":4,"offset":5536},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"jsx","value":"</Tab>","position":{"start":{"line":62,"column":1,"offset":5538},"end":{"line":62,"column":7,"offset":5544},"indent":[]}},{"type":"jsx","value":"<Tab label=\"SolSA Deployment\">","position":{"start":{"line":64,"column":1,"offset":5546},"end":{"line":64,"column":31,"offset":5576},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The SolSA library includes fully integrated support for all Kubernetes resource types. The (much larger) code block below shows how Bookinfo would be specified in SolSA directly using the Kubernetes native concept of ","position":{"start":{"line":66,"column":1,"offset":5578},"end":{"line":66,"column":218,"offset":5795},"indent":[]}},{"type":"inlineCode","value":"Deployment","position":{"start":{"line":66,"column":218,"offset":5795},"end":{"line":66,"column":230,"offset":5807},"indent":[]}},{"type":"text","value":".  Working at this lower level of abstraction requires that the developer be more familiar with Kubernetes concepts, but enables full control over all aspects of the generated YAML.  Notice that even when working directly with ","position":{"start":{"line":66,"column":230,"offset":5807},"end":{"line":66,"column":457,"offset":6034},"indent":[]}},{"type":"inlineCode","value":"Deployment","position":{"start":{"line":66,"column":457,"offset":6034},"end":{"line":66,"column":469,"offset":6046},"indent":[]}},{"type":"text","value":", the developer is still able to elide the details of the ","position":{"start":{"line":66,"column":469,"offset":6046},"end":{"line":66,"column":527,"offset":6104},"indent":[]}},{"type":"inlineCode","value":"Service","position":{"start":{"line":66,"column":527,"offset":6104},"end":{"line":66,"column":536,"offset":6113},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":66,"column":536,"offset":6113},"end":{"line":66,"column":541,"offset":6118},"indent":[]}},{"type":"inlineCode","value":"Ingress","position":{"start":{"line":66,"column":541,"offset":6118},"end":{"line":66,"column":550,"offset":6127},"indent":[]}},{"type":"text","value":" resources by using SolSA's ","position":{"start":{"line":66,"column":550,"offset":6127},"end":{"line":66,"column":578,"offset":6155},"indent":[]}},{"type":"inlineCode","value":"getService","position":{"start":{"line":66,"column":578,"offset":6155},"end":{"line":66,"column":590,"offset":6167},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":66,"column":590,"offset":6167},"end":{"line":66,"column":595,"offset":6172},"indent":[]}},{"type":"inlineCode","value":"getIngress","position":{"start":{"line":66,"column":595,"offset":6172},"end":{"line":66,"column":607,"offset":6184},"indent":[]}},{"type":"text","value":" methods which derive all the necessary information the underlying ","position":{"start":{"line":66,"column":607,"offset":6184},"end":{"line":66,"column":674,"offset":6251},"indent":[]}},{"type":"inlineCode","value":"Deployment","position":{"start":{"line":66,"column":674,"offset":6251},"end":{"line":66,"column":686,"offset":6263},"indent":[]}},{"type":"text","value":". Thus even when working at a Kubernetes-native level of abstraction, SolSA can eliminate some of the repetitive and error prone coding present when working purely at the YAML level.","position":{"start":{"line":66,"column":686,"offset":6263},"end":{"line":66,"column":868,"offset":6445},"indent":[]}}],"position":{"start":{"line":66,"column":1,"offset":5578},"end":{"line":66,"column":868,"offset":6445},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"let solsa = require('solsa')\n\nlet details = new solsa.apps.v1.Deployment({\n  metadata: { name: 'details' },\n  spec: {\n    selector: { matchLabels: { 'solsa.ibm.com/pod': 'details' } },\n    replicas: 1,\n    template: {\n      spec: {\n        containers: [\n          {\n            name: 'details',\n            image: 'istio/examples-bookinfo-details-v1:1.15.0',\n            env: [{ name: 'PORT', value: '9080' }],\n            ports: [{ containerPort: 9080 }],\n            livenessProbe: { tcpSocket: { port: 9080 } },\n            readinessProbe: { tcpSocket: { port: 9080 } }\n          }\n        ]\n      }\n    }\n  }\n})\nlet detailsService = details.getService()\n\nlet reviews = new solsa.apps.v1.Deployment({\n  metadata: { name: 'reviews' },\n  spec: {\n    selector: { matchLabels: { 'solsa.ibm.com/pod': 'reviews' } },\n    replicas: 1,\n    template: {\n      spec: {\n        containers: [\n          {\n            name: 'reviews',\n            image: 'istio/examples-bookinfo-reviews-v1:1.15.0',\n            env: [{ name: 'PORT', value: '9080' }],\n            ports: [{ containerPort: 9080 }],\n            livenessProbe: { tcpSocket: { port: 9080 } },\n            readinessProbe: { tcpSocket: { port: 9080 } }\n          }\n        ]\n      }\n    }\n  }\n})\nlet reviewsService = reviews.getService()\n\nlet ratings = new solsa.apps.v1.Deployment({\n  metadata: { name: 'ratings' },\n  spec: {\n    selector: { matchLabels: { 'solsa.ibm.com/pod': 'ratings' } },\n    replicas: 1,\n    template: {\n      spec: {\n        containers: [\n          {\n            name: 'ratings',\n            image: 'istio/examples-bookinfo-ratings-v1:1.15.0',\n            env: [{ name: 'PORT', value: '9080' }],\n            ports: [{ containerPort: 9080 }],\n            livenessProbe: { tcpSocket: { port: 9080 } },\n            readinessProbe: { tcpSocket: { port: 9080 } }\n          }\n        ]\n      }\n    }\n  }\n})\nlet ratingsService = ratings.getService()\n\nlet productpage = new solsa.apps.v1.Deployment({\n  metadata: { name: 'productpage' },\n  spec: {\n    selector: { matchLabels: { 'solsa.ibm.com/pod': 'productpage' } },\n    replicas: 1,\n    template: {\n      spec: {\n        containers: [\n          {\n            name: 'productpage',\n            image: 'istio/examples-bookinfo-productpage-v1:1.15.0',\n            env: [\n              { name: 'PORT', value: '9080' },\n              { name: 'DETAILS_HOSTNAME', value: details.metadata.name },\n              { name: 'RATINGS_HOSTNAME', value: ratings.metadata.name },\n              { name: 'REVIEWS_HOSTNAME', value: reviews.metadata.name }\n            ],\n            ports: [{ containerPort: 9080 }],\n            livenessProbe: { tcpSocket: { port: 9080 } },\n            readinessProbe: { tcpSocket: { port: 9080 } }\n          }\n        ]\n      }\n    }\n  }\n})\nlet productpageService = productpage.getService()\nlet ingress = productpageService.getIngress({ vhost: 'bookinfo' })\n\nmodule.exports = new solsa.Bundle({ details, detailsService, reviews, reviewsService, ratings, ratingsService, productpage, productpageService, ingress })","position":{"start":{"line":68,"column":1,"offset":6447},"end":{"line":170,"column":4,"offset":9510},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"jsx","value":"</Tab>","position":{"start":{"line":172,"column":1,"offset":9512},"end":{"line":172,"column":7,"offset":9518},"indent":[]}},{"type":"jsx","value":"<Tab label=\"Generated YAML\">","position":{"start":{"line":174,"column":1,"offset":9520},"end":{"line":174,"column":29,"offset":9548},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Shown below is the output from ","position":{"start":{"line":176,"column":1,"offset":9550},"end":{"line":176,"column":32,"offset":9581},"indent":[]}},{"type":"inlineCode","value":"solsa yaml","position":{"start":{"line":176,"column":32,"offset":9581},"end":{"line":176,"column":44,"offset":9593},"indent":[]}},{"type":"text","value":" when applied to either of the two Bookinfo specifications.","position":{"start":{"line":176,"column":44,"offset":9593},"end":{"line":176,"column":103,"offset":9652},"indent":[]}}],"position":{"start":{"line":176,"column":1,"offset":9550},"end":{"line":176,"column":103,"offset":9652},"indent":[]}},{"type":"code","lang":"yaml","meta":null,"value":"apiVersion: v1\nkind: Service\nmetadata:\n  name: details\nspec:\n  ports:\n  - port: 9080\n    targetPort: 9080\n  selector:\n    solsa.ibm.com/pod: details\n  type: ClusterIP\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: productpage\nspec:\n  ports:\n  - port: 9080\n    targetPort: 9080\n  selector:\n    solsa.ibm.com/pod: productpage\n  type: ClusterIP\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: ratings\nspec:\n  ports:\n  - port: 9080\n    targetPort: 9080\n  selector:\n    solsa.ibm.com/pod: ratings\n  type: ClusterIP\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: reviews\nspec:\n  ports:\n  - port: 9080\n    targetPort: 9080\n  selector:\n    solsa.ibm.com/pod: reviews\n  type: ClusterIP\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: details\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      solsa.ibm.com/pod: details\n  template:\n    metadata:\n      labels:\n        solsa.ibm.com/pod: details\n    spec:\n      containers:\n      - env:\n        - name: PORT\n          value: \"9080\"\n        image: istio/examples-bookinfo-details-v1:1.15.0\n        livenessProbe:\n          tcpSocket:\n            port: 9080\n        name: details\n        ports:\n        - containerPort: 9080\n        readinessProbe:\n          tcpSocket:\n            port: 9080\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: productpage\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      solsa.ibm.com/pod: productpage\n  template:\n    metadata:\n      labels:\n        solsa.ibm.com/pod: productpage\n    spec:\n      containers:\n      - env:\n        - name: PORT\n          value: \"9080\"\n        - name: DETAILS_HOSTNAME\n          value: details\n        - name: RATINGS_HOSTNAME\n          value: ratings\n        - name: REVIEWS_HOSTNAME\n          value: reviews\n        image: istio/examples-bookinfo-productpage-v1:1.15.0\n        livenessProbe:\n          tcpSocket:\n            port: 9080\n        name: productpage\n        ports:\n        - containerPort: 9080\n        readinessProbe:\n          tcpSocket:\n            port: 9080\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: ratings\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      solsa.ibm.com/pod: ratings\n  template:\n    metadata:\n      labels:\n        solsa.ibm.com/pod: ratings\n    spec:\n      containers:\n      - env:\n        - name: PORT\n          value: \"9080\"\n        image: istio/examples-bookinfo-ratings-v1:1.15.0\n        livenessProbe:\n          tcpSocket:\n            port: 9080\n        name: ratings\n        ports:\n        - containerPort: 9080\n        readinessProbe:\n          tcpSocket:\n            port: 9080\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: reviews\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      solsa.ibm.com/pod: reviews\n  template:\n    metadata:\n      labels:\n        solsa.ibm.com/pod: reviews\n    spec:\n      containers:\n      - env:\n        - name: PORT\n          value: \"9080\"\n        image: istio/examples-bookinfo-reviews-v1:1.15.0\n        livenessProbe:\n          tcpSocket:\n            port: 9080\n        name: reviews\n        ports:\n        - containerPort: 9080\n        readinessProbe:\n          tcpSocket:\n            port: 9080\n---\napiVersion: extensions/v1beta1\nkind: Ingress\nmetadata:\n  name: productpage\nspec:\n  rules:\n  - host: bookinfo.mycluster.us-east.containers.appdomain.cloud\n    http:\n      paths:\n      - backend:\n          serviceName: productpage\n          servicePort: 9080\n        path: /\n  tls:\n  - hosts:\n    - bookinfo.mycluster.us-east.containers.appdomain.cloud\n    secretName: mycluster","position":{"start":{"line":178,"column":1,"offset":9654},"end":{"line":366,"column":4,"offset":13204},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"jsx","value":"</Tab>","position":{"start":{"line":368,"column":1,"offset":13206},"end":{"line":368,"column":7,"offset":13212},"indent":[]}},{"type":"jsx","value":"</Tabs>","position":{"start":{"line":370,"column":1,"offset":13214},"end":{"line":370,"column":8,"offset":13221},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Using SolSA with Kubernetes Operators","position":{"start":{"line":373,"column":5,"offset":13228},"end":{"line":373,"column":42,"offset":13265},"indent":[]}}],"position":{"start":{"line":373,"column":1,"offset":13224},"end":{"line":373,"column":42,"offset":13265},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The SolSA library includes JavaScript/TypeScript bindings for every Kubernetes Operator available on\n","position":{"start":{"line":375,"column":1,"offset":13267},"end":{"line":376,"column":1,"offset":13368},"indent":[1]}},{"type":"link","title":null,"url":"https://operatorhub.io/","children":[{"type":"text","value":"OperatorHub.io","position":{"start":{"line":376,"column":2,"offset":13369},"end":{"line":376,"column":16,"offset":13383},"indent":[]}}],"position":{"start":{"line":376,"column":1,"offset":13368},"end":{"line":376,"column":42,"offset":13409},"indent":[]}},{"type":"text","value":".  These enables full IDE-support for defining applications that utilize operators to manage the life-cycles of some portions of their resources.","position":{"start":{"line":376,"column":42,"offset":13409},"end":{"line":376,"column":187,"offset":13554},"indent":[]}}],"position":{"start":{"line":375,"column":1,"offset":13267},"end":{"line":376,"column":187,"offset":13554},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"As an example, the tabs below show the SolSA specification and the generated YAML of a simple language translation application in which a microservice defined using SolSA's ","position":{"start":{"line":378,"column":1,"offset":13556},"end":{"line":378,"column":174,"offset":13729},"indent":[]}},{"type":"inlineCode","value":"ContainerzedService","position":{"start":{"line":378,"column":174,"offset":13729},"end":{"line":378,"column":195,"offset":13750},"indent":[]}},{"type":"text","value":" abstraction is combined with an instance of the Watson Translator service on the IBM Public Cloud. The IBM Cloud Operator is used to instantiate the Watson Translator Service instance and make the credentials for accessing it available to the dependent microservice via a Kubernetes secret.","position":{"start":{"line":378,"column":195,"offset":13750},"end":{"line":378,"column":486,"offset":14041},"indent":[]}}],"position":{"start":{"line":378,"column":1,"offset":13556},"end":{"line":378,"column":486,"offset":14041},"indent":[]}},{"type":"jsx","value":"<Tabs>","position":{"start":{"line":380,"column":1,"offset":14043},"end":{"line":380,"column":7,"offset":14049},"indent":[]}},{"type":"jsx","value":"<Tab label=\"SolSA\">","position":{"start":{"line":382,"column":1,"offset":14051},"end":{"line":382,"column":20,"offset":14070},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"\nconst path = require('path')\nconst solsa = require('solsa')\n\nfunction translator ({ name, language }) {\n  let watson = new solsa.LanguageTranslator({ name: 'watson-translator-for-' + name })\n  let translator = new solsa.ContainerizedService({ name, image: 'solsa-translator', build: path.join(__dirname, 'solsa-translator'), port: 8080 })\n  translator.env = { LANGUAGE: { value: language }, WATSON_URL: watson.getSecret('url'), WATSON_APIKEY: watson.getSecret('apikey') }\n  let ingress = translator.getIngress()\n  return new solsa.Bundle({ watson, translator, ingress })\n}\n\nmodule.exports = translator({ name: 'my-translator', language: 'en' })","position":{"start":{"line":384,"column":1,"offset":14072},"end":{"line":398,"column":4,"offset":14735},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"jsx","value":"</Tab>","position":{"start":{"line":400,"column":1,"offset":14737},"end":{"line":400,"column":7,"offset":14743},"indent":[]}},{"type":"jsx","value":"<Tab label=\"YAML\">","position":{"start":{"line":402,"column":1,"offset":14745},"end":{"line":402,"column":19,"offset":14763},"indent":[]}},{"type":"code","lang":"yaml","meta":null,"value":"apiVersion: ibmcloud.ibm.com/v1alpha1\nkind: Service\nmetadata:\n  name: watson-translator-for-my-translator\nspec:\n  plan: lite\n  serviceClass: language-translator\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: my-translator\nspec:\n  ports:\n  - port: 8080\n    targetPort: 8080\n  selector:\n    solsa.ibm.com/pod: my-translator\n  type: ClusterIP\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: my-translator\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      solsa.ibm.com/pod: my-translator\n  template:\n    metadata:\n      labels:\n        solsa.ibm.com/pod: my-translator\n    spec:\n      containers:\n      - env:\n        - name: PORT\n          value: \"8080\"\n        - name: LANGUAGE\n          value: en\n        - name: WATSON_URL\n          valueFrom:\n            secretKeyRef:\n              key: url\n              name: watson-translator-for-my-translator\n        - name: WATSON_APIKEY\n          valueFrom:\n            secretKeyRef:\n              key: apikey\n              name: watson-translator-for-my-translator\n        image: docker.io/solsa/solsa-translator\n        livenessProbe:\n          tcpSocket:\n            port: 8080\n        name: my-translator\n        ports:\n        - containerPort: 8080\n        readinessProbe:\n          tcpSocket:\n            port: 8080\n---\napiVersion: extensions/v1beta1\nkind: Ingress\nmetadata:\n  name: my-translator\nspec:\n  rules:\n  - host: my-translator.mycluster.us-east.containers.appdomain.cloud\n    http:\n      paths:\n      - backend:\n          serviceName: my-translator\n          servicePort: 8080\n        path: /\n  tls:\n  - hosts:\n    - my-translator.mycluster.us-east.containers.appdomain.cloud\n    secretName: mycluster\n---\napiVersion: ibmcloud.ibm.com/v1alpha1\nkind: Binding\nmetadata:\n  name: watson-translator-for-my-translator\nspec:\n  serviceName: watson-translator-for-my-translator\n","position":{"start":{"line":404,"column":1,"offset":14765},"end":{"line":491,"column":4,"offset":16624},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"jsx","value":"</Tab>","position":{"start":{"line":492,"column":1,"offset":16625},"end":{"line":492,"column":7,"offset":16631},"indent":[]}},{"type":"jsx","value":"</Tabs>","position":{"start":{"line":494,"column":1,"offset":16633},"end":{"line":494,"column":8,"offset":16640},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Using SolSA with ArgoCD","position":{"start":{"line":497,"column":5,"offset":16647},"end":{"line":497,"column":28,"offset":16670},"indent":[]}}],"position":{"start":{"line":497,"column":1,"offset":16643},"end":{"line":497,"column":28,"offset":16670},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The usage of ArgoCD is described in more detail in the ","position":{"start":{"line":499,"column":1,"offset":16672},"end":{"line":499,"column":56,"offset":16727},"indent":[]}},{"type":"link","title":null,"url":"/guides/continuous-delivery/","children":[{"type":"text","value":"continuous delivery","position":{"start":{"line":499,"column":57,"offset":16728},"end":{"line":499,"column":76,"offset":16747},"indent":[]}}],"position":{"start":{"line":499,"column":56,"offset":16727},"end":{"line":499,"column":107,"offset":16778},"indent":[]}},{"type":"text","value":" section of this guide. A SolSA-specified application can be used in exactly the same workflows as an application specified by a Helm chart or Kustomize tree. The only additional step is to inform ArgoCD that it should use its SolSA plugin to generate the YAML for the application. In the instructions below, we will continue using the Bookinfo sample from the ","position":{"start":{"line":499,"column":107,"offset":16778},"end":{"line":499,"column":468,"offset":17139},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/IBM/solsa-examples","children":[{"type":"text","value":"solsa-examples","position":{"start":{"line":499,"column":469,"offset":17140},"end":{"line":499,"column":483,"offset":17154},"indent":[]}}],"position":{"start":{"line":499,"column":468,"offset":17139},"end":{"line":499,"column":523,"offset":17194},"indent":[]}},{"type":"text","value":" git repo. The main SolSA file for this application is ","position":{"start":{"line":499,"column":523,"offset":17194},"end":{"line":499,"column":578,"offset":17249},"indent":[]}},{"type":"inlineCode","value":"instance.js","position":{"start":{"line":499,"column":578,"offset":17249},"end":{"line":499,"column":591,"offset":17262},"indent":[]}}],"position":{"start":{"line":499,"column":1,"offset":16672},"end":{"line":499,"column":591,"offset":17262},"indent":[]}},{"type":"jsx","value":"<Tabs>","position":{"start":{"line":501,"column":1,"offset":17264},"end":{"line":501,"column":7,"offset":17270},"indent":[]}},{"type":"jsx","value":"<Tab label=\"ArgoCD UI\">","position":{"start":{"line":503,"column":1,"offset":17272},"end":{"line":503,"column":24,"offset":17295},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":true,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Log into ArgoCD","position":{"start":{"line":505,"column":4,"offset":17300},"end":{"line":505,"column":19,"offset":17315},"indent":[]}}],"position":{"start":{"line":505,"column":4,"offset":17300},"end":{"line":505,"column":19,"offset":17315},"indent":[]}}],"position":{"start":{"line":505,"column":1,"offset":17297},"end":{"line":506,"column":1,"offset":17316},"indent":[1]}},{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Click ","position":{"start":{"line":507,"column":4,"offset":17320},"end":{"line":507,"column":10,"offset":17326},"indent":[]}},{"type":"inlineCode","value":"New Application","position":{"start":{"line":507,"column":10,"offset":17326},"end":{"line":507,"column":27,"offset":17343},"indent":[]}},{"type":"text","value":" and provide the following values:","position":{"start":{"line":507,"column":27,"offset":17343},"end":{"line":507,"column":61,"offset":17377},"indent":[]}}],"position":{"start":{"line":507,"column":4,"offset":17320},"end":{"line":507,"column":61,"offset":17377},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"application name","position":{"start":{"line":509,"column":7,"offset":17385},"end":{"line":509,"column":25,"offset":17403},"indent":[]}},{"type":"text","value":" - dev-bookinfo","position":{"start":{"line":509,"column":25,"offset":17403},"end":{"line":509,"column":40,"offset":17418},"indent":[]}}],"position":{"start":{"line":509,"column":7,"offset":17385},"end":{"line":509,"column":40,"offset":17418},"indent":[]}}],"position":{"start":{"line":509,"column":5,"offset":17383},"end":{"line":509,"column":40,"offset":17418},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"project","position":{"start":{"line":510,"column":7,"offset":17425},"end":{"line":510,"column":16,"offset":17434},"indent":[]}},{"type":"text","value":" - default","position":{"start":{"line":510,"column":16,"offset":17434},"end":{"line":510,"column":26,"offset":17444},"indent":[]}}],"position":{"start":{"line":510,"column":7,"offset":17425},"end":{"line":510,"column":26,"offset":17444},"indent":[]}}],"position":{"start":{"line":510,"column":5,"offset":17423},"end":{"line":510,"column":26,"offset":17444},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"sync-policy","position":{"start":{"line":511,"column":7,"offset":17451},"end":{"line":511,"column":20,"offset":17464},"indent":[]}},{"type":"text","value":" - ","position":{"start":{"line":511,"column":20,"offset":17464},"end":{"line":511,"column":23,"offset":17467},"indent":[]}},{"type":"inlineCode","value":"Automatic with pruning","position":{"start":{"line":511,"column":23,"offset":17467},"end":{"line":511,"column":47,"offset":17491},"indent":[]}}],"position":{"start":{"line":511,"column":7,"offset":17451},"end":{"line":511,"column":47,"offset":17491},"indent":[]}}],"position":{"start":{"line":511,"column":5,"offset":17449},"end":{"line":511,"column":47,"offset":17491},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"repository url","position":{"start":{"line":512,"column":7,"offset":17498},"end":{"line":512,"column":23,"offset":17514},"indent":[]}},{"type":"text","value":" - ","position":{"start":{"line":512,"column":23,"offset":17514},"end":{"line":512,"column":26,"offset":17517},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/IBM/solsa-examples.git","children":[{"type":"text","value":"https://github.com/IBM/solsa-examples.git","position":{"start":{"line":512,"column":26,"offset":17517},"end":{"line":512,"column":67,"offset":17558},"indent":[]}}],"position":{"start":{"line":512,"column":26,"offset":17517},"end":{"line":512,"column":67,"offset":17558},"indent":[]}}],"position":{"start":{"line":512,"column":7,"offset":17498},"end":{"line":512,"column":67,"offset":17558},"indent":[]}}],"position":{"start":{"line":512,"column":5,"offset":17496},"end":{"line":512,"column":67,"offset":17558},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"revision","position":{"start":{"line":513,"column":7,"offset":17565},"end":{"line":513,"column":17,"offset":17575},"indent":[]}},{"type":"text","value":" - HEAD","position":{"start":{"line":513,"column":17,"offset":17575},"end":{"line":513,"column":24,"offset":17582},"indent":[]}}],"position":{"start":{"line":513,"column":7,"offset":17565},"end":{"line":513,"column":24,"offset":17582},"indent":[]}}],"position":{"start":{"line":513,"column":5,"offset":17563},"end":{"line":513,"column":24,"offset":17582},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"path","position":{"start":{"line":514,"column":7,"offset":17589},"end":{"line":514,"column":13,"offset":17595},"indent":[]}},{"type":"text","value":" - examples/bookinfo","position":{"start":{"line":514,"column":13,"offset":17595},"end":{"line":514,"column":33,"offset":17615},"indent":[]}}],"position":{"start":{"line":514,"column":7,"offset":17589},"end":{"line":514,"column":33,"offset":17615},"indent":[]}}],"position":{"start":{"line":514,"column":5,"offset":17587},"end":{"line":514,"column":33,"offset":17615},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"destination cluster","position":{"start":{"line":515,"column":7,"offset":17622},"end":{"line":515,"column":28,"offset":17643},"indent":[]}},{"type":"text","value":" - ","position":{"start":{"line":515,"column":28,"offset":17643},"end":{"line":515,"column":31,"offset":17646},"indent":[]}},{"type":"link","title":null,"url":"https://kubernetes.default.svc","children":[{"type":"text","value":"https://kubernetes.default.svc","position":{"start":{"line":515,"column":31,"offset":17646},"end":{"line":515,"column":61,"offset":17676},"indent":[]}}],"position":{"start":{"line":515,"column":31,"offset":17646},"end":{"line":515,"column":61,"offset":17676},"indent":[]}}],"position":{"start":{"line":515,"column":7,"offset":17622},"end":{"line":515,"column":61,"offset":17676},"indent":[]}}],"position":{"start":{"line":515,"column":5,"offset":17620},"end":{"line":515,"column":61,"offset":17676},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"destination namespace","position":{"start":{"line":516,"column":7,"offset":17683},"end":{"line":516,"column":30,"offset":17706},"indent":[]}},{"type":"text","value":" - dev","position":{"start":{"line":516,"column":30,"offset":17706},"end":{"line":516,"column":36,"offset":17712},"indent":[]}}],"position":{"start":{"line":516,"column":7,"offset":17683},"end":{"line":516,"column":36,"offset":17712},"indent":[]}}],"position":{"start":{"line":516,"column":5,"offset":17681},"end":{"line":516,"column":36,"offset":17712},"indent":[]}}],"position":{"start":{"line":509,"column":5,"offset":17383},"end":{"line":516,"column":36,"offset":17712},"indent":[5,5,5,5,5,5,5]}}],"position":{"start":{"line":507,"column":1,"offset":17317},"end":{"line":517,"column":1,"offset":17713},"indent":[1,1,1,1,1,1,1,1,1,1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Click the ","position":{"start":{"line":518,"column":4,"offset":17717},"end":{"line":518,"column":14,"offset":17727},"indent":[]}},{"type":"inlineCode","value":"EDIT AS YAML","position":{"start":{"line":518,"column":14,"offset":17727},"end":{"line":518,"column":28,"offset":17741},"indent":[]}},{"type":"text","value":" button and add the plugin stanza shown below to the ","position":{"start":{"line":518,"column":28,"offset":17741},"end":{"line":518,"column":81,"offset":17794},"indent":[]}},{"type":"inlineCode","value":"source:","position":{"start":{"line":518,"column":81,"offset":17794},"end":{"line":518,"column":90,"offset":17803},"indent":[]}},{"type":"text","value":" block","position":{"start":{"line":518,"column":90,"offset":17803},"end":{"line":518,"column":96,"offset":17809},"indent":[]}}],"position":{"start":{"line":518,"column":4,"offset":17717},"end":{"line":518,"column":96,"offset":17809},"indent":[]}}],"position":{"start":{"line":518,"column":1,"offset":17714},"end":{"line":518,"column":96,"offset":17809},"indent":[]}}],"position":{"start":{"line":505,"column":1,"offset":17297},"end":{"line":518,"column":96,"offset":17809},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"code","lang":"yaml","meta":null,"value":"source:\n  plugin:\n    name: solsa\n    env:\n      - name: SOLSA_APP_MAIN\n        value: instance.js","position":{"start":{"line":519,"column":1,"offset":17810},"end":{"line":526,"column":4,"offset":17920},"indent":[1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Finally deploy Bookinfo by clicking the Create button.","position":{"start":{"line":528,"column":1,"offset":17922},"end":{"line":528,"column":55,"offset":17976},"indent":[]}}],"position":{"start":{"line":528,"column":1,"offset":17922},"end":{"line":528,"column":55,"offset":17976},"indent":[]}},{"type":"jsx","value":"</Tab>","position":{"start":{"line":530,"column":1,"offset":17978},"end":{"line":530,"column":7,"offset":17984},"indent":[]}},{"type":"jsx","value":"<Tab label=\"Textual CRD\">","position":{"start":{"line":532,"column":1,"offset":17986},"end":{"line":532,"column":26,"offset":18011},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"ArgoCD Applications can also be specified without using the ArgoCD UI by defining an ","position":{"start":{"line":534,"column":1,"offset":18013},"end":{"line":534,"column":86,"offset":18098},"indent":[]}},{"type":"inlineCode","value":"argoproj.io.Application","position":{"start":{"line":534,"column":86,"offset":18098},"end":{"line":534,"column":111,"offset":18123},"indent":[]}},{"type":"text","value":" Custom Resource. In this style of management you\ncreate a ","position":{"start":{"line":534,"column":111,"offset":18123},"end":{"line":535,"column":10,"offset":18182},"indent":[1]}},{"type":"inlineCode","value":"bookinfoApp.yaml","position":{"start":{"line":535,"column":10,"offset":18182},"end":{"line":535,"column":28,"offset":18200},"indent":[]}},{"type":"text","value":" file containing the YAML shown below and then either check it into a git repo that ArgoCD is monitoring\nor directly apply it to your cluster via ","position":{"start":{"line":535,"column":28,"offset":18200},"end":{"line":536,"column":42,"offset":18346},"indent":[1]}},{"type":"inlineCode","value":"kubectl apply -f bookinfoApp.yaml -n tools","position":{"start":{"line":536,"column":42,"offset":18346},"end":{"line":536,"column":86,"offset":18390},"indent":[]}},{"type":"text","value":". Within a few seconds, the Bookinfo application should be deployed to your ","position":{"start":{"line":536,"column":86,"offset":18390},"end":{"line":536,"column":162,"offset":18466},"indent":[]}},{"type":"inlineCode","value":"dev","position":{"start":{"line":536,"column":162,"offset":18466},"end":{"line":536,"column":167,"offset":18471},"indent":[]}},{"type":"text","value":" namespace.","position":{"start":{"line":536,"column":167,"offset":18471},"end":{"line":536,"column":178,"offset":18482},"indent":[]}}],"position":{"start":{"line":534,"column":1,"offset":18013},"end":{"line":536,"column":178,"offset":18482},"indent":[1,1]}},{"type":"code","lang":"yaml","meta":null,"value":"apiVersion: argoproj.io/v1alpha1\nkind: Application\nmetadata:\n  name: bookinfo\nspec:\n  project: default\n  source:\n    repoURL: 'https://github.com/IBM/solsa-examples.git'\n    path: examples/bookinfo\n    targetRevision: HEAD\n    plugin:\n      name: solsa\n      env:\n        - name: SOLSA_APP_MAIN\n          value: instance.js\n  destination:\n    server: 'https://kubernetes.default.svc'\n    namespace: dev\n  syncPolicy:\n    automated:\n      prune: true","position":{"start":{"line":538,"column":1,"offset":18484},"end":{"line":560,"column":4,"offset":18945},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"jsx","value":"</Tab>","position":{"start":{"line":562,"column":1,"offset":18947},"end":{"line":562,"column":7,"offset":18953},"indent":[]}},{"type":"jsx","value":"</Tabs>","position":{"start":{"line":564,"column":1,"offset":18955},"end":{"line":564,"column":8,"offset":18962},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"More Information","position":{"start":{"line":566,"column":4,"offset":18967},"end":{"line":566,"column":20,"offset":18983},"indent":[]}}],"position":{"start":{"line":566,"column":1,"offset":18964},"end":{"line":566,"column":20,"offset":18983},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Additional information on SolSA, including ","position":{"start":{"line":568,"column":1,"offset":18985},"end":{"line":568,"column":44,"offset":19028},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/IBM/solsa-examples","children":[{"type":"text","value":"a tutorial and sample applications","position":{"start":{"line":568,"column":45,"offset":19029},"end":{"line":568,"column":79,"offset":19063},"indent":[]}}],"position":{"start":{"line":568,"column":44,"offset":19028},"end":{"line":568,"column":119,"offset":19103},"indent":[]}},{"type":"text","value":", is available from the ","position":{"start":{"line":568,"column":119,"offset":19103},"end":{"line":568,"column":143,"offset":19127},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/IBM/solsa","children":[{"type":"text","value":"SolSA open source project","position":{"start":{"line":568,"column":144,"offset":19128},"end":{"line":568,"column":169,"offset":19153},"indent":[]}}],"position":{"start":{"line":568,"column":143,"offset":19127},"end":{"line":568,"column":200,"offset":19184},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":568,"column":200,"offset":19184},"end":{"line":568,"column":201,"offset":19185},"indent":[]}}],"position":{"start":{"line":568,"column":1,"offset":18985},"end":{"line":568,"column":201,"offset":19185},"indent":[]}},{"type":"export","value":"export const _frontmatter = {}","position":{"start":{"line":571,"column":1,"offset":19188},"end":{"line":571,"column":31,"offset":19218},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":571,"column":31,"offset":19218}}},"scopeImports":[],"scopeIdentifiers":[],"rawMDXOutput":"/* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\nimport DefaultLayout from \"/home/jenkins/workspace/dev/dev-ibm-garage-cloud.ibm-garage-developer-guide.sms-pipeline/node_modules/gatsby-theme-carbon/src/templates/Default.js\"\nexport const _frontmatter = {};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\nconst PageDescription = makeShortcode(\"PageDescription\");\nconst Tabs = makeShortcode(\"Tabs\");\nconst Tab = makeShortcode(\"Tab\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <PageDescription mdxType=\"PageDescription\">\n      <p>{`SolSA makes it possible to specify the software architecture of Kubernetes-managed cloud applications as JavaScript or TypeScript programs.`}</p>\n    </PageDescription>\n    <h2 {...{\n      \"id\": \"overview\"\n    }}>{`Overview`}</h2>\n    <p>{`Kubernetes is becoming the de facto standard for managing applications in the cloud. Thanks to `}<a parentName=\"p\" {...{\n        \"href\": \"https://operatorhub.io/\"\n      }}>{`operators`}</a>{`, Kubernetes can be extended to manage virtually any kind of application resources: not only containers and microservices, but also virtual machines, cloud functions and events, managed cloud services, policies, meshes, etc. Each resource can be declared and configured with a few lines of YAML. However, while YAML is a fine language to perform some basic configuration, SolSA is designed to enable application developers to reason about applications at a higher-level of abstraction using familiar languages and development tools.`}</p>\n    <p>{`The SolSA library for Node.js —a shorthand for Solution Service Architecture — makes it possible to specify the architecture of cloud applications as programs. SolSA enables developers to configure Kubernetes-managed resources by writing JavaScript or TypeScript code instead of YAML. SolSA automatically translates the developer written code to the required lower-level YAML. SolSA integrates with IDEs such as Visual Studio Code to provide online validation, code completion, and documentation of the various resources and configuration parameters.`}</p>\n    <h2 {...{\n      \"id\": \"getting-started\"\n    }}>{`Getting Started`}</h2>\n    <p>{`The `}<inlineCode parentName=\"p\">{`solsa`}</inlineCode>{` CLI is included in the `}<a parentName=\"p\" {...{\n        \"href\": \"/ibm-garage-developer-guide/guides/tools-image\"\n      }}>{`Tools Image`}</a>{` and is pre-configured as a plugin to the `}<a parentName=\"p\" {...{\n        \"href\": \"/ibm-garage-developer-guide/guides/continuous-delivery\"\n      }}>{`ArgoCD instance`}</a>{` installed in the `}<inlineCode parentName=\"p\">{`tools`}</inlineCode>{` namespace of your cluster. No further setup is needed for basic usage of SolSA.  To enable full IDE support, you will need to install the `}<inlineCode parentName=\"p\">{`solsa`}</inlineCode>{` package using npm in the same manner in which you would install any npm package you want to use in your IDE. Some typical installation options are discussed in the `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/IBM/solsa#solsa-setup\"\n      }}>{`SolSA setup instructions`}</a>{`.`}</p>\n    <h2 {...{\n      \"id\": \"usage-scenarios\"\n    }}>{`Usage Scenarios`}</h2>\n    <p>{`SolSA can be applied in any scenario where it is desirable to use a higher-level of abstraction to programmatically generate YAML to be applied to a Kubernetes or OpenShift cluster.  The use of SolSA is particularly compelling to:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Specify the architecture of complex applications composed of multiple Kubernetes resources. SolSA augments the base Kubernetes resources with additional abstractions that simplify the specification of common patterns and reduce the amount of code written.`}</li>\n      <li parentName=\"ul\">{`Enable full IDE-support for your software architecture, including validation, code assist, and integrated documentation of Kubernetes resources and operators.`}</li>\n      <li parentName=\"ul\">{`Allow a single architecture specification to be programmatically specialized to different contexts (eg. dev vs. test vs. prod).`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"specification-of-kubernetes-resources\"\n    }}>{`Specification of Kubernetes Resources`}</h3>\n    <p>{`Deploying just a single microservice that is accessible outside of a Kubernetes cluster requires specifying three related Kubernetes resources: a `}<inlineCode parentName=\"p\">{`Deployment`}</inlineCode>{`, a `}<inlineCode parentName=\"p\">{`Service`}</inlineCode>{`, and an `}<inlineCode parentName=\"p\">{`Ingress`}</inlineCode>{`. SolSA simplifies this task by reducing the amount of repetitive code a developer needs to write and maintain.`}</p>\n    <p>{`To illustrate how to use SolSA to specify the architecture of a simple cloud native application, we use the `}<a parentName=\"p\" {...{\n        \"href\": \"https://istio.io/docs/examples/bookinfo/\"\n      }}>{`Bookinfo sample application`}</a>{` from the Istio project. Bookinfo consists of four containerized microservices: an externally exposed productpage service that is implemented using three internal backend microservices.`}</p>\n    <p>{`The tabs below contain two variants of the SolSA specification of Bookinfo’s architecture and the (identical) Kubernetes YAML that is generated from either one of these specifications by the `}<inlineCode parentName=\"p\">{`solsa`}</inlineCode>{` CLI.`}</p>\n    <Tabs mdxType=\"Tabs\">\n      <Tab label=\"SolSA ContainerizedService\" mdxType=\"Tab\">\n        <p>{`A very common Kubernetes pattern is the combination of a `}<inlineCode parentName=\"p\">{`Deployment`}</inlineCode>{` and a `}<inlineCode parentName=\"p\">{`Service`}</inlineCode>{` to implement a single logical microservice. SolSA’s `}<inlineCode parentName=\"p\">{`ContainerizedService`}</inlineCode>{` provides a higher level abstraction for this pattern that allows the developer to specify the essential elements while eliding virtually all of the Kubernetes-specific details. As shown below, simple microservices can be specified very concisely. By providing additional arguments to the `}<inlineCode parentName=\"p\">{`ContainerizedService`}</inlineCode>{` constructor it is possible to control many aspects of the generated YAML. Specifying that the `}<inlineCode parentName=\"p\">{`productpage`}</inlineCode>{` service should be exposed outside the cluster is declared by invoking `}<inlineCode parentName=\"p\">{`getIngress`}</inlineCode>{` passing the desired virtual host name `}<inlineCode parentName=\"p\">{`bookinfo`}</inlineCode>{`.`}</p>\n        <pre><code parentName=\"pre\" {...{\n            \"className\": \"language-javascript\"\n          }}>{`let solsa = require('solsa')\n\nlet details = new solsa.ContainerizedService({ name: 'details', image: 'istio/examples-bookinfo-details-v1:1.15.0', port: 9080 })\nlet ratings = new solsa.ContainerizedService({ name: 'ratings', image: 'istio/examples-bookinfo-ratings-v1:1.15.0', port: 9080 })\nlet reviews = new solsa.ContainerizedService({ name: 'reviews', image: 'istio/examples-bookinfo-reviews-v1:1.15.0', port: 9080 })\nlet productpage = new solsa.ContainerizedService({ name: 'productpage', image: 'istio/examples-bookinfo-productpage-v1:1.15.0', port: 9080 })\nproductpage.env = {\n  DETAILS_HOSTNAME: details.name,\n  RATINGS_HOSTNAME: ratings.name,\n  REVIEWS_HOSTNAME: reviews.name\n}\nlet entry = productpage.getIngress({ vhost: 'bookinfo' })\n\nmodule.exports = new solsa.Bundle({ details, ratings, reviews, productpage, entry })\n`}</code></pre>\n      </Tab>\n      <Tab label=\"SolSA Deployment\" mdxType=\"Tab\">\n        <p>{`The SolSA library includes fully integrated support for all Kubernetes resource types. The (much larger) code block below shows how Bookinfo would be specified in SolSA directly using the Kubernetes native concept of `}<inlineCode parentName=\"p\">{`Deployment`}</inlineCode>{`.  Working at this lower level of abstraction requires that the developer be more familiar with Kubernetes concepts, but enables full control over all aspects of the generated YAML.  Notice that even when working directly with `}<inlineCode parentName=\"p\">{`Deployment`}</inlineCode>{`, the developer is still able to elide the details of the `}<inlineCode parentName=\"p\">{`Service`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`Ingress`}</inlineCode>{` resources by using SolSA’s `}<inlineCode parentName=\"p\">{`getService`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`getIngress`}</inlineCode>{` methods which derive all the necessary information the underlying `}<inlineCode parentName=\"p\">{`Deployment`}</inlineCode>{`. Thus even when working at a Kubernetes-native level of abstraction, SolSA can eliminate some of the repetitive and error prone coding present when working purely at the YAML level.`}</p>\n        <pre><code parentName=\"pre\" {...{\n            \"className\": \"language-javascript\"\n          }}>{`let solsa = require('solsa')\n\nlet details = new solsa.apps.v1.Deployment({\n  metadata: { name: 'details' },\n  spec: {\n    selector: { matchLabels: { 'solsa.ibm.com/pod': 'details' } },\n    replicas: 1,\n    template: {\n      spec: {\n        containers: [\n          {\n            name: 'details',\n            image: 'istio/examples-bookinfo-details-v1:1.15.0',\n            env: [{ name: 'PORT', value: '9080' }],\n            ports: [{ containerPort: 9080 }],\n            livenessProbe: { tcpSocket: { port: 9080 } },\n            readinessProbe: { tcpSocket: { port: 9080 } }\n          }\n        ]\n      }\n    }\n  }\n})\nlet detailsService = details.getService()\n\nlet reviews = new solsa.apps.v1.Deployment({\n  metadata: { name: 'reviews' },\n  spec: {\n    selector: { matchLabels: { 'solsa.ibm.com/pod': 'reviews' } },\n    replicas: 1,\n    template: {\n      spec: {\n        containers: [\n          {\n            name: 'reviews',\n            image: 'istio/examples-bookinfo-reviews-v1:1.15.0',\n            env: [{ name: 'PORT', value: '9080' }],\n            ports: [{ containerPort: 9080 }],\n            livenessProbe: { tcpSocket: { port: 9080 } },\n            readinessProbe: { tcpSocket: { port: 9080 } }\n          }\n        ]\n      }\n    }\n  }\n})\nlet reviewsService = reviews.getService()\n\nlet ratings = new solsa.apps.v1.Deployment({\n  metadata: { name: 'ratings' },\n  spec: {\n    selector: { matchLabels: { 'solsa.ibm.com/pod': 'ratings' } },\n    replicas: 1,\n    template: {\n      spec: {\n        containers: [\n          {\n            name: 'ratings',\n            image: 'istio/examples-bookinfo-ratings-v1:1.15.0',\n            env: [{ name: 'PORT', value: '9080' }],\n            ports: [{ containerPort: 9080 }],\n            livenessProbe: { tcpSocket: { port: 9080 } },\n            readinessProbe: { tcpSocket: { port: 9080 } }\n          }\n        ]\n      }\n    }\n  }\n})\nlet ratingsService = ratings.getService()\n\nlet productpage = new solsa.apps.v1.Deployment({\n  metadata: { name: 'productpage' },\n  spec: {\n    selector: { matchLabels: { 'solsa.ibm.com/pod': 'productpage' } },\n    replicas: 1,\n    template: {\n      spec: {\n        containers: [\n          {\n            name: 'productpage',\n            image: 'istio/examples-bookinfo-productpage-v1:1.15.0',\n            env: [\n              { name: 'PORT', value: '9080' },\n              { name: 'DETAILS_HOSTNAME', value: details.metadata.name },\n              { name: 'RATINGS_HOSTNAME', value: ratings.metadata.name },\n              { name: 'REVIEWS_HOSTNAME', value: reviews.metadata.name }\n            ],\n            ports: [{ containerPort: 9080 }],\n            livenessProbe: { tcpSocket: { port: 9080 } },\n            readinessProbe: { tcpSocket: { port: 9080 } }\n          }\n        ]\n      }\n    }\n  }\n})\nlet productpageService = productpage.getService()\nlet ingress = productpageService.getIngress({ vhost: 'bookinfo' })\n\nmodule.exports = new solsa.Bundle({ details, detailsService, reviews, reviewsService, ratings, ratingsService, productpage, productpageService, ingress })\n`}</code></pre>\n      </Tab>\n      <Tab label=\"Generated YAML\" mdxType=\"Tab\">\n        <p>{`Shown below is the output from `}<inlineCode parentName=\"p\">{`solsa yaml`}</inlineCode>{` when applied to either of the two Bookinfo specifications.`}</p>\n        <pre><code parentName=\"pre\" {...{\n            \"className\": \"language-yaml\"\n          }}>{`apiVersion: v1\nkind: Service\nmetadata:\n  name: details\nspec:\n  ports:\n  - port: 9080\n    targetPort: 9080\n  selector:\n    solsa.ibm.com/pod: details\n  type: ClusterIP\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: productpage\nspec:\n  ports:\n  - port: 9080\n    targetPort: 9080\n  selector:\n    solsa.ibm.com/pod: productpage\n  type: ClusterIP\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: ratings\nspec:\n  ports:\n  - port: 9080\n    targetPort: 9080\n  selector:\n    solsa.ibm.com/pod: ratings\n  type: ClusterIP\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: reviews\nspec:\n  ports:\n  - port: 9080\n    targetPort: 9080\n  selector:\n    solsa.ibm.com/pod: reviews\n  type: ClusterIP\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: details\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      solsa.ibm.com/pod: details\n  template:\n    metadata:\n      labels:\n        solsa.ibm.com/pod: details\n    spec:\n      containers:\n      - env:\n        - name: PORT\n          value: \"9080\"\n        image: istio/examples-bookinfo-details-v1:1.15.0\n        livenessProbe:\n          tcpSocket:\n            port: 9080\n        name: details\n        ports:\n        - containerPort: 9080\n        readinessProbe:\n          tcpSocket:\n            port: 9080\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: productpage\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      solsa.ibm.com/pod: productpage\n  template:\n    metadata:\n      labels:\n        solsa.ibm.com/pod: productpage\n    spec:\n      containers:\n      - env:\n        - name: PORT\n          value: \"9080\"\n        - name: DETAILS_HOSTNAME\n          value: details\n        - name: RATINGS_HOSTNAME\n          value: ratings\n        - name: REVIEWS_HOSTNAME\n          value: reviews\n        image: istio/examples-bookinfo-productpage-v1:1.15.0\n        livenessProbe:\n          tcpSocket:\n            port: 9080\n        name: productpage\n        ports:\n        - containerPort: 9080\n        readinessProbe:\n          tcpSocket:\n            port: 9080\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: ratings\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      solsa.ibm.com/pod: ratings\n  template:\n    metadata:\n      labels:\n        solsa.ibm.com/pod: ratings\n    spec:\n      containers:\n      - env:\n        - name: PORT\n          value: \"9080\"\n        image: istio/examples-bookinfo-ratings-v1:1.15.0\n        livenessProbe:\n          tcpSocket:\n            port: 9080\n        name: ratings\n        ports:\n        - containerPort: 9080\n        readinessProbe:\n          tcpSocket:\n            port: 9080\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: reviews\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      solsa.ibm.com/pod: reviews\n  template:\n    metadata:\n      labels:\n        solsa.ibm.com/pod: reviews\n    spec:\n      containers:\n      - env:\n        - name: PORT\n          value: \"9080\"\n        image: istio/examples-bookinfo-reviews-v1:1.15.0\n        livenessProbe:\n          tcpSocket:\n            port: 9080\n        name: reviews\n        ports:\n        - containerPort: 9080\n        readinessProbe:\n          tcpSocket:\n            port: 9080\n---\napiVersion: extensions/v1beta1\nkind: Ingress\nmetadata:\n  name: productpage\nspec:\n  rules:\n  - host: bookinfo.mycluster.us-east.containers.appdomain.cloud\n    http:\n      paths:\n      - backend:\n          serviceName: productpage\n          servicePort: 9080\n        path: /\n  tls:\n  - hosts:\n    - bookinfo.mycluster.us-east.containers.appdomain.cloud\n    secretName: mycluster\n`}</code></pre>\n      </Tab>\n    </Tabs>\n    <h3 {...{\n      \"id\": \"using-solsa-with-kubernetes-operators\"\n    }}>{`Using SolSA with Kubernetes Operators`}</h3>\n    <p>{`The SolSA library includes JavaScript/TypeScript bindings for every Kubernetes Operator available on\n`}<a parentName=\"p\" {...{\n        \"href\": \"https://operatorhub.io/\"\n      }}>{`OperatorHub.io`}</a>{`.  These enables full IDE-support for defining applications that utilize operators to manage the life-cycles of some portions of their resources.`}</p>\n    <p>{`As an example, the tabs below show the SolSA specification and the generated YAML of a simple language translation application in which a microservice defined using SolSA’s `}<inlineCode parentName=\"p\">{`ContainerzedService`}</inlineCode>{` abstraction is combined with an instance of the Watson Translator service on the IBM Public Cloud. The IBM Cloud Operator is used to instantiate the Watson Translator Service instance and make the credentials for accessing it available to the dependent microservice via a Kubernetes secret.`}</p>\n    <Tabs mdxType=\"Tabs\">\n      <Tab label=\"SolSA\" mdxType=\"Tab\">\n        <pre><code parentName=\"pre\" {...{\n            \"className\": \"language-javascript\"\n          }}>{`\nconst path = require('path')\nconst solsa = require('solsa')\n\nfunction translator ({ name, language }) {\n  let watson = new solsa.LanguageTranslator({ name: 'watson-translator-for-' + name })\n  let translator = new solsa.ContainerizedService({ name, image: 'solsa-translator', build: path.join(__dirname, 'solsa-translator'), port: 8080 })\n  translator.env = { LANGUAGE: { value: language }, WATSON_URL: watson.getSecret('url'), WATSON_APIKEY: watson.getSecret('apikey') }\n  let ingress = translator.getIngress()\n  return new solsa.Bundle({ watson, translator, ingress })\n}\n\nmodule.exports = translator({ name: 'my-translator', language: 'en' })\n`}</code></pre>\n      </Tab>\n      <Tab label=\"YAML\" mdxType=\"Tab\">\n        <pre><code parentName=\"pre\" {...{\n            \"className\": \"language-yaml\"\n          }}>{`apiVersion: ibmcloud.ibm.com/v1alpha1\nkind: Service\nmetadata:\n  name: watson-translator-for-my-translator\nspec:\n  plan: lite\n  serviceClass: language-translator\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: my-translator\nspec:\n  ports:\n  - port: 8080\n    targetPort: 8080\n  selector:\n    solsa.ibm.com/pod: my-translator\n  type: ClusterIP\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: my-translator\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      solsa.ibm.com/pod: my-translator\n  template:\n    metadata:\n      labels:\n        solsa.ibm.com/pod: my-translator\n    spec:\n      containers:\n      - env:\n        - name: PORT\n          value: \"8080\"\n        - name: LANGUAGE\n          value: en\n        - name: WATSON_URL\n          valueFrom:\n            secretKeyRef:\n              key: url\n              name: watson-translator-for-my-translator\n        - name: WATSON_APIKEY\n          valueFrom:\n            secretKeyRef:\n              key: apikey\n              name: watson-translator-for-my-translator\n        image: docker.io/solsa/solsa-translator\n        livenessProbe:\n          tcpSocket:\n            port: 8080\n        name: my-translator\n        ports:\n        - containerPort: 8080\n        readinessProbe:\n          tcpSocket:\n            port: 8080\n---\napiVersion: extensions/v1beta1\nkind: Ingress\nmetadata:\n  name: my-translator\nspec:\n  rules:\n  - host: my-translator.mycluster.us-east.containers.appdomain.cloud\n    http:\n      paths:\n      - backend:\n          serviceName: my-translator\n          servicePort: 8080\n        path: /\n  tls:\n  - hosts:\n    - my-translator.mycluster.us-east.containers.appdomain.cloud\n    secretName: mycluster\n---\napiVersion: ibmcloud.ibm.com/v1alpha1\nkind: Binding\nmetadata:\n  name: watson-translator-for-my-translator\nspec:\n  serviceName: watson-translator-for-my-translator\n\n`}</code></pre>\n      </Tab>\n    </Tabs>\n    <h3 {...{\n      \"id\": \"using-solsa-with-argocd\"\n    }}>{`Using SolSA with ArgoCD`}</h3>\n    <p>{`The usage of ArgoCD is described in more detail in the `}<a parentName=\"p\" {...{\n        \"href\": \"/ibm-garage-developer-guide/guides/continuous-delivery/\"\n      }}>{`continuous delivery`}</a>{` section of this guide. A SolSA-specified application can be used in exactly the same workflows as an application specified by a Helm chart or Kustomize tree. The only additional step is to inform ArgoCD that it should use its SolSA plugin to generate the YAML for the application. In the instructions below, we will continue using the Bookinfo sample from the `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/IBM/solsa-examples\"\n      }}>{`solsa-examples`}</a>{` git repo. The main SolSA file for this application is `}<inlineCode parentName=\"p\">{`instance.js`}</inlineCode></p>\n    <Tabs mdxType=\"Tabs\">\n      <Tab label=\"ArgoCD UI\" mdxType=\"Tab\">\n        <ol>\n          <li parentName=\"ol\">\n            <p parentName=\"li\">{`Log into ArgoCD`}</p>\n          </li>\n          <li parentName=\"ol\">\n            <p parentName=\"li\">{`Click `}<inlineCode parentName=\"p\">{`New Application`}</inlineCode>{` and provide the following values:`}</p>\n            <ul parentName=\"li\">\n              <li parentName=\"ul\"><inlineCode parentName=\"li\">{`application name`}</inlineCode>{` - dev-bookinfo`}</li>\n              <li parentName=\"ul\"><inlineCode parentName=\"li\">{`project`}</inlineCode>{` - default`}</li>\n              <li parentName=\"ul\"><inlineCode parentName=\"li\">{`sync-policy`}</inlineCode>{` - `}<inlineCode parentName=\"li\">{`Automatic with pruning`}</inlineCode></li>\n              <li parentName=\"ul\"><inlineCode parentName=\"li\">{`repository url`}</inlineCode>{` - `}<a parentName=\"li\" {...{\n                  \"href\": \"https://github.com/IBM/solsa-examples.git\"\n                }}>{`https://github.com/IBM/solsa-examples.git`}</a></li>\n              <li parentName=\"ul\"><inlineCode parentName=\"li\">{`revision`}</inlineCode>{` - HEAD`}</li>\n              <li parentName=\"ul\"><inlineCode parentName=\"li\">{`path`}</inlineCode>{` - examples/bookinfo`}</li>\n              <li parentName=\"ul\"><inlineCode parentName=\"li\">{`destination cluster`}</inlineCode>{` - `}<a parentName=\"li\" {...{\n                  \"href\": \"https://kubernetes.default.svc\"\n                }}>{`https://kubernetes.default.svc`}</a></li>\n              <li parentName=\"ul\"><inlineCode parentName=\"li\">{`destination namespace`}</inlineCode>{` - dev`}</li>\n            </ul>\n          </li>\n          <li parentName=\"ol\">\n            <p parentName=\"li\">{`Click the `}<inlineCode parentName=\"p\">{`EDIT AS YAML`}</inlineCode>{` button and add the plugin stanza shown below to the `}<inlineCode parentName=\"p\">{`source:`}</inlineCode>{` block`}</p>\n          </li>\n        </ol>\n        <pre><code parentName=\"pre\" {...{\n            \"className\": \"language-yaml\"\n          }}>{`source:\n  plugin:\n    name: solsa\n    env:\n      - name: SOLSA_APP_MAIN\n        value: instance.js\n`}</code></pre>\n        <p>{`Finally deploy Bookinfo by clicking the Create button.`}</p>\n      </Tab>\n      <Tab label=\"Textual CRD\" mdxType=\"Tab\">\n        <p>{`ArgoCD Applications can also be specified without using the ArgoCD UI by defining an `}<inlineCode parentName=\"p\">{`argoproj.io.Application`}</inlineCode>{` Custom Resource. In this style of management you\ncreate a `}<inlineCode parentName=\"p\">{`bookinfoApp.yaml`}</inlineCode>{` file containing the YAML shown below and then either check it into a git repo that ArgoCD is monitoring\nor directly apply it to your cluster via `}<inlineCode parentName=\"p\">{`kubectl apply -f bookinfoApp.yaml -n tools`}</inlineCode>{`. Within a few seconds, the Bookinfo application should be deployed to your `}<inlineCode parentName=\"p\">{`dev`}</inlineCode>{` namespace.`}</p>\n        <pre><code parentName=\"pre\" {...{\n            \"className\": \"language-yaml\"\n          }}>{`apiVersion: argoproj.io/v1alpha1\nkind: Application\nmetadata:\n  name: bookinfo\nspec:\n  project: default\n  source:\n    repoURL: 'https://github.com/IBM/solsa-examples.git'\n    path: examples/bookinfo\n    targetRevision: HEAD\n    plugin:\n      name: solsa\n      env:\n        - name: SOLSA_APP_MAIN\n          value: instance.js\n  destination:\n    server: 'https://kubernetes.default.svc'\n    namespace: dev\n  syncPolicy:\n    automated:\n      prune: true\n`}</code></pre>\n      </Tab>\n    </Tabs>\n    <h2 {...{\n      \"id\": \"more-information\"\n    }}>{`More Information`}</h2>\n    <p>{`Additional information on SolSA, including `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/IBM/solsa-examples\"\n      }}>{`a tutorial and sample applications`}</a>{`, is available from the `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/IBM/solsa\"\n      }}>{`SolSA open source project`}</a>{`.`}</p>\n\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;"}}